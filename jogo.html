<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>UNO TFM - Mesa</title>

<style>
body{
    margin:0;font-family:Segoe UI,Tahoma,Verdana,sans-serif;
    background:#222;color:white;display:flex;height:100vh;overflow:hidden
}

/* --- layout base (igual ao seu) --- */
#listaJogadores{width:200px;background:#333;padding:10px;border-right:2px solid #444}
#areaJogo{flex:1;display:flex;flex-direction:column}
#topoJogo{height:60px;display:flex;justify-content:space-between;align-items:center;padding:0 20px;background:#2a2a2a;border-bottom:2px solid #444}
#mesa{flex:1;display:flex;justify-content:center;align-items:center;position:relative}
#minhaMao{height:160px}

/* --- bot√£o regras --- */
#btnVerRegras{
    position:fixed;top:80px;right:20px;
    background:#e6c9a8;border:3px solid #5d4037;
    padding:8px 15px;border-radius:8px;
    font-weight:bold;color:#5d4037;cursor:pointer;
    z-index:999
}

/* ===================== */
/* PERGAMINHO DE VERDADE */
/* ===================== */

.p-overlay{
    position:fixed;inset:0;
    background:rgba(0,0,0,.85);
    display:none;align-items:center;justify-content:center;
    z-index:2000
}

.pergaminho-container{
    width:360px;
    transform-origin:center;
}

.pergaminho-img{
    width:100%;
    display:block;
}

/* anima√ß√£o */
.animar-abrir{
    animation:abrirPergaminho .6s ease-out forwards;
}

@keyframes abrirPergaminho{
    0%{transform:scaleX(.05) scaleY(.1);opacity:0}
    50%{transform:scaleX(1) scaleY(.15);opacity:1}
    100%{transform:scale(1)}
}

/* conte√∫do em cima da imagem */
.pergaminho-conteudo{
    position:absolute;
    inset:40px 30px;
    color:#4e342e;
    overflow-y:auto;
}

.regra-link{
    background:rgba(93,64,55,.15);
    margin:8px 0;padding:10px;
    border-radius:6px;
    cursor:pointer;
    font-weight:bold;
    text-align:center;
}
.regra-link:hover{background:#5d4037;color:#f4e4bc}

.btn-voltar{
    margin-top:15px;
    width:100%;
    padding:8px;
    border:none;
    background:#5d4037;
    color:white;
    cursor:pointer;
}
</style>
</head>

<body>

<div id="listaJogadores"><h3>Jogadores</h3></div>

<div id="areaJogo">
    <div id="topoJogo">
        <span>Sala: <b id="txtSalaID">...</b></span>
        <span id="txtVez">Carregando...</span>
        <button id="btnSair" style="background:#f44336;color:white">Sair</button>
    </div>
    <div id="mesa"></div>
    <div id="minhaMao"></div>
</div>

<button id="btnVerRegras" onclick="abrirPergaminho()">üìú REGRAS</button>

<!-- OVERLAY -->
<div id="overlayPergaminho" class="p-overlay" onclick="fecharPergaminho(event)">

    <div id="pergaminho" class="pergaminho-container">
        <img id="imgPergaminho" class="pergaminho-img" src="pergaminho/fechado.png">

        <div id="conteudoLista" class="pergaminho-conteudo" style="display:none">
            <div class="regra-link" onclick="mostrarDetalhe('Sem Desafiar')">Sem Desafiar</div>
            <div class="regra-link" onclick="mostrarDetalhe('Acumular +2')">Acumular +2</div>
            <div class="regra-link" onclick="mostrarDetalhe('7 Roda a M√£o')">7 Roda a M√£o</div>
            <div class="regra-link" onclick="mostrarDetalhe('0 Troca Tudo')">0 Troca Tudo</div>
        </div>

        <div id="conteudoDetalhe" class="pergaminho-conteudo" style="display:none">
            <h3 id="tituloRegra"></h3>
            <p id="textoRegra"></p>
            <button class="btn-voltar" onclick="voltarLista()">VOLTAR</button>
        </div>
    </div>
</div>

<script type="module" src="jogo.js"></script>

<script>
const overlay = document.getElementById('overlayPergaminho');
const perg = document.getElementById('pergaminho');
const img = document.getElementById('imgPergaminho');
const lista = document.getElementById('conteudoLista');
const detalhe = document.getElementById('conteudoDetalhe');

function abrirPergaminho(){
    overlay.style.display='flex';
    img.src='pergaminho/aberto.png';
    perg.classList.add('animar-abrir');
    setTimeout(()=>lista.style.display='block',300);
}

function fecharPergaminho(e){
    if(e.target!==overlay) return;
    overlay.style.display='none';
    perg.classList.remove('animar-abrir');
    img.src='pergaminho/fechado.png';
    lista.style.display='none';
    detalhe.style.display='none';
}

function mostrarDetalhe(nome){
    const regras={
        'Sem Desafiar':'O +4 √© absoluto.',
        'Acumular +2':'+2 pode empilhar.',
        '7 Roda a M√£o':'Todos passam as cartas.',
        '0 Troca Tudo':'Troca geral de m√£os.'
    };
    lista.style.display='none';
    detalhe.style.display='block';
    document.getElementById('tituloRegra').innerText=nome;
    document.getElementById('textoRegra').innerText=regras[nome];
}

function voltarLista(){
    detalhe.style.display='none';
    lista.style.display='block';
}
</script>

</body>
</html>
